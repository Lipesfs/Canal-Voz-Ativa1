<div id="login">
  <input type="email" id="email" placeholder="Seu email">
  <input type="password" id="senha" placeholder="Senha">
  <button onclick="login()">Entrar</button>
</div>

<div id="mensagens" style="display:none;">
  <h2>Mensagens Recebidas</h2>
  <ul id="lista"></ul>
</div>

<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
  const supabase = createClient('SUA_SUPABASE_URL', 'SUA_SUPABASE_ANON_KEY');

  window.login = async () => {
    const email = document.getElementById("email").value;
    const senha = document.getElementById("senha").value;
    const { error } = await supabase.auth.signInWithPassword({ email, password: senha });

    if (!error) carregarMensagens();
    else alert("Erro ao logar");
  };

  async function carregarMensagens() {
    document.getElementById("login").style.display = "none";
    document.getElementById("mensagens").style.display = "block";

    const { data } = await supabase.from("mensagens").select("*").order("created_at", { ascending: false });
    const lista = document.getElementById("lista");
    data.forEach(msg => {
      const li = document.createElement("li");
      li.textContent = `${msg.nome} (${msg.email}): ${msg.mensagem}`;
      lista.appendChild(li);
    });
  }
</script>
